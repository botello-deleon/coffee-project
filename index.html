<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet'/>

    <link href="https://fonts.googleapis.com/css?family=Metal+Mania|Rosarivo" rel="stylesheet">

</head>
<body>

<h1 id="mainHeader">Heavy Metal Coffee</h1>
<hr>
<div class="container">
    <div class="row">
        <div class="col-6" id="input-container">
            <form class="search-form p-4" >
                <div class="coffee">
                    <label for="roast-selection"><h4>Roast select</h4></label>
                    <select class="roast-control" id="roast-selection">
                        <option>all</option>
                        <option>light</option>
                        <option>medium</option>
                        <option>dark</option>
                    </select>
                </div>


                <div class="coffee">
                    <label class="coffeeSearchinput" for="coffeeSearch"><h4>Search coffees</h4></label>
                    <textarea class="roast-control-text"  id="coffeeSearch" rows="3"></textarea>
                </div>
                <input id="submit" type="submit" style="height:25px; width: 75%"/>
            </form>
            <br>
            <br>
            <br>
            <div class="d-flex justify-content-center">
            <img src="img/metalcoffeemug.jpg" height="300px" width="300px">
            </div>
            <div class="d-flex justify-content-center">
                <img src="img/death_wish_coffee_ground_angle_2048x2048.jpg" height="400px" alt="coffee bag">
            </div>
            <div class="hrs text-center p-5">
                <p>
                    <h1>Hours <br>
                    Open: Sun Down <br>
                    Close: Sun Up</h1>
                </p>
            </div>
            <div class="map">

            </div>

        </div>


        <div class="col-6">
            <table class="w-100">
                <thead>
                <!-- <tr>
                    <th>ID</th>
                    <th>NAME</th>
                    <th>ROAST</th>
                </tr> -->
                </thead>
                <tbody id="coffees" class="text-center"></tbody>
            </table>
        </div>

    </div>


</div>

<div class="container">
<footer class="footer">
    <div class="foot-one"  id="map"></div>
    <div class="foot-two"><p>Vogon Ipsum smashing your slayjid worst hath changed senior forces eyes poetry
        groop meated months snapped ill-tempered. Foonting corps small rancid road
        jurtles vogsphere finger ravenous leapt kria galaxy given inconveniences traal. <br> Lost bindlewurdles straight gross under buried morning hub some along lost
        mistake worst poem planet fact bugblatter aside moderately making freddled
        squealer. Jurpling megabrantis Vogon correct smashing slurping nobbling primeval
        first megabrantis mid were grunthos galactic Vogons</p></div>
</footer>
</div>



<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script src="main.js"></script>
<script src="js/keys.js"></script>
<script src='https://static-assets.mapbox.com/gl-pricing/dist/mapbox-gl.js'></script>
<script src="js/keys.js"></script>
<script src="js/mapbox-geocoder-utils.js"></script>
<script>
    mapboxgl.accessToken = mapboxKey;
    var map = new mapboxgl.Map({
        container: "map",
        style: "mapbox://styles/mapbox/dark-v10",
        center: [10, 10],
        zoom: 10
    });

    var objArr = [
        {
            name: "Fujiya",
            address: "9030 Wurzbach Rd, San Antonio, TX 78240",
            about: "Japanese Steakhouse"
        },
        {
            name: "Taqueria Jalisco",
            address: "151 Moursund Blvd, San Antonio, TX 78221",
            about: "Mexican Restaraunt"
        },
        {
            name: "Pizza Italia",
            address: "3023 Thousand Oaks #101, San Antonio, TX 78247",
            about: "Italian eatery and bar"
        }
    ];

    function geoChanger(name, address, zoom, about) {
        if (zoom === null || isNaN(zoom)) {
            zoom = map.getZoom();
        }
        return geocode(address, mapboxKey).then(function (result) {
            mapChange(result, zoom, name, about);
            //console.log(result);

        });
    }

    function mapChange(coords, zoom, name, about) {
        //map.setStyle("mapbox://styles/johnd894/cjujx7a7p0zka1ftisf77fsey");

        if (zoom === null || isNaN(zoom)) {
            zoom = map.getZoom();
        }
        map.setZoom(zoom);
        map.setCenter(coords);
        console.log("changed?8***********");

        var locPopup = new mapboxgl.Popup()
            .setHTML(about);


        var marker = new mapboxgl.Marker()
            .setLngLat(coords)
            .addTo(map)
            .setPopup(locPopup);

    }

    function mapProcess(item, inx, arr) {
        var name = item.name;
        var address = item.address;
        var about = item.about;

        geoChanger(name, address, 17, about);


    }

    //objArr.forEach(mapProcess);


    //geoChanger("9030 Wurzbach Rd, San Antonio, TX 78240", 17);





</script>
</body>
</html>
